<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="print.css">
</head>
<body>
    <div class="container">
        <div class="header centralizar2">
            <img src="http://nclrights.files.wordpress.com/2010/01/seal-of-nj.jpg"><br>
            <h1>Atestado Médico</h1><br>
        </div>

        <div class="buscarDados">
            <div class="row">
                <hr>
                <p>Atesto para os devidos fins, que o(a) Sr(a):<span id="nomepaciente"></span></p>
                <div class="col">
                    <p>Portador do CPF : <span id="cpf"></span></p>
                    <p>sexo: <span id="sexo"></span></p>
            
                </div>
                 <div class="col">
                    <p>Idade: <span id="idade"></span></p>
            
                </div>
                <hr>
                <br>
            </div>
            <div class="row">
                <div>
                    <fieldset>
                        <p >Na Data: <span id="data" ></span></p>
                        <p> Foi atendido(a) pelo(a) Dr: <span id="medicoR"></span></p>
                        <p>Especialidade: <span id="especialidade"></span></p>
                    </fieldset>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="centralizar">
                    <fieldset>
                    <p>Assinatura do Médico(a)</p>
                    <p>_________________</p><br>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search)
        const cpf = urlParams.get('cpf');
        fetch('http://localhost:3000/medico', {
            method: 'GET',    
        })
        .then(response => response.json())
        .then(data =>{
            const pessoaE = data.find(pessoa => pessoa.cpf === cpf)
            if(pessoaE){

                document.getElementById('nomepaciente').textContent = pessoaE.nomepaciente;
                document.getElementById('idade').textContent = pessoaE.idade;
                document.getElementById('sexo').textContent = pessoaE. sexo;
                document.getElementById('data').textContent = pessoaE. data;
                document.getElementById('medicoR').textContent = pessoaE.medicoR;
                document.getElementById('especialidade').textContent = pessoaE.especialidade;
                window.print();
            }else{
               alert("não encontrado")
            }
        })
        document.getElementById('nomepaciente').textContent = nomepaciente;
        document.getElementById('cpf').textContent = cpf;
        document.getElementById('idade').textContent = idade;
        document.getElementById('sexo').textContent = sexo;
        document.getElementById('data').textContent = data;
        document.getElementById('medicoR').textContent = medicoR;
        document.getElementById('especialidade').textContent = especialidade;



        // function buscarDados(){
            // const cpf = document.getElementById('cpf').value;
            // fetch('http://localhost:3000/medico', {
            //     method: 'GET',
            // })
            // .then(response => response.json())
            // .then(data =>{
            //     const pessoaEncontrada = data.find(pessoa => pessoa.cpf === cpf)
            //     if(pessoaEncontrada){
            //         document.getElementById('nomepaciente').value = pessoaEncontrada.nomepaciente;
            //         document.getElementById('idade').value = pessoaEncontrada.idade;
            //         document.getElementById('cpf').value = pessoaEncontrada.cpf;
            //         document.getElementById('id').value = pessoaEncontrada.id;
            //     }else{
            //         alert("Pessoa não encontrada!")
            //     }
            // })
        
    </script>

</body>
</html>