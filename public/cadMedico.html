<!DOCTYPE html>
<html lang="PT-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastrar Médico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="cadastro.css">
    
</head>
<body>
    <div class="bloc3">
        <div class="brand-logo">
            <div class="brand-title">cadastro</div>
                <div class="inputs">
                    <form id="medico">

                        <div class="row">
                            <div class="col">
                                <label>Medico Responsável:</label>
                                <input type="text" id="medicoR"><br><br>
                            </div>
                            <div class="col">
                                <label>Especialidade</label>
                                <input type="text" id="especialidade"required> <br> <br>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label>Nome do Paciente: </label>
                                <input type="text" id="nomepaciente" required><br><br>
                            </div>
                            <div class="col">
                                <label>Idade</label>
                                <input type="number" id="idade" ><br><br>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label for="sexo">Sexo:</label>
                                <select id="sexo" name="sexo" class="sel">
                                <option value="M" >Masculino</option>
                                <option value="F">Feminino</option>
                                <option value="O">Outro</option>
                                </select><br><br>
                            </div>
                            <div class="col">
                                <label>CPF do Paciente:</label>
                                <input type="text" id="cpf" required><br><br>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col">
                                <label>Data:</label>
                                <input type="date" id="data" required><br><br>
                            </div>
                            <div class="col">
                                <label>Diagnóstico médico:</label>
                                <input type="text" id="diagnostico" required><br><br>
                            </div>
                        </div>
                    
                        
                        <input type="submit" onclick="enviarDados()" value="Enviar" class="button"><br><br>

                        <a href="pg.html" class="button"><input type="button" value="HOME" class="button"></a>
                    </form>
                </div>
        </div>
    </div>
    
    <script>
        //Função que envia os dados para o servidor
    function enviarDados(){
    //Obter o valores do input
    const medicoR = document.getElementById('medicoR').value;
    const especialidade = document.getElementById('especialidade').value;
    const nomepaciente = document.getElementById('nomepaciente').value;
    const idade = document.getElementById('idade').value;
    const sexo = document.getElementById('sexo').value;
    const cpf = document.getElementById('cpf').value;
    const data = document.getElementById('data').value;
    const diagnostico = document.getElementById('diagnostico').value;
    

    //Envia os dados para o servidor utilizando o método fetch()

    fetch('http://localhost:3000/medico',{
        method: 'POST', //Método HTTP Utilizado (POST), Headrs é um objeto de requisição HTTP que Insere no JSON as Informações
        headers:{
            "content-Type":
            "application/json" //tipo de conteudo enviado (JSON)
        },
        //Body é um objeto JS que foi convertido para JSON. Usando o metodo JSO.strigify. Enviando no formato JSON
        body: JSON.stringify({
            medicoR: medicoR, especialidade: especialidade, nomepaciente: nomepaciente,
            idade: idade, cpf:cpf, data: data, diagnostico: diagnostico, sexo: sexo
        })
    })
    
    .then(response => response.json())
    //Converte a resposta para JSON
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>